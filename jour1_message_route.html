<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>De Nous √† Vous ‚Äì Radio Papou & Manou FM üéôÔ∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&family=Lato:wght@400;700&display=swap" rel="stylesheet">

<style>
/* D√©finition des couleurs th√©matiques (pour coh√©rence, m√™me si le fond est diff√©rent) */
:root {
    --color-cacao-dark: #4F352C;    /* Brun Cacao / Textile fonc√© */
    --color-mill√©sime-gold: #B48A64; /* Or/Vin */
    --color-beige-textile: #F7F4F0; /* Beige clair */
    --color-text-dark: #3E332C;
}

/* üåà --- STYLE GLOBAL --- */
body {
    margin: 0;
    padding: 0;
    font-family: 'Lato', sans-serif;
    background: 
        linear-gradient(135deg, rgba(173,216,230,0.6) 0%, rgba(255,218,185,0.6) 100%),
        url('images/fond-radio.jpg') center/cover no-repeat fixed;
    color: var(--color-text-dark);
    text-align: center;
    overflow-x: hidden;
}

/* üåü --- TITRE PRINCIPAL --- */
h1 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 2.4rem;
    color: #FF6F61;
    text-shadow: 0 0 8px rgba(255,111,97,0.6);
    margin-top: 4vh;
    position: relative;
}

/* halo lumineux sous le titre */
h1::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -12px;
    width: 180px;
    height: 8px;
    border-radius: 50%;
    background: radial-gradient(ellipse, rgba(255,255,255,0.8), transparent);
    filter: blur(6px);
}

/* --- SOUS-TITRE --- */
p.subtitle {
    color: #f0fff0; /* vert tr√®s clair */
    text-shadow: 1px 1px 4px rgba(0,0,0,0.5);
    font-size: 1.2rem;
    margin-bottom: 3vh;
}

/* --- MESSAGE D‚ÄôINDICATION --- */
p.indication {
    color: #fffaf0;
    font-style: italic;
    font-size: 1.rem;
    margin-bottom: 5vh;
    line-height: 1.6;
    text-shadow: 1px 1px 4px rgba(0,0,0,0.4);
}

/* --- ONDES RADIO --- */
.onde {
    width: 100%;
    max-height: 200px;
    opacity: 0.3;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
}

/* --- CONTENEUR DES PORTRAITS --- */
.container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2rem;
    max-width: 1100px;
    margin: auto;
    padding: 2rem;
    opacity: 0;
    animation: fadeIn 2s ease forwards;
}

/* --- √âL√âMENT INDIVIDUEL (pour JS) --- */
.item {
    text-align: center;
    cursor: pointer;
    transition: opacity 0.3s;
}
.item:hover {
    opacity: 0.8;
}

/* --- PORTRAITS EN ROND STYLE VINYLE --- */
.portrait {
    position: relative;
    width: 160px;
    height: 160px;
    border-radius: 50%;
    overflow: hidden;
    background: radial-gradient(circle at 30% 30%, #fff8f2, #c1a48f);
    box-shadow: 0 0 15px rgba(255,111,97,0.3);
    transition: transform 0.4s ease, box-shadow 0.4s ease, border 0.5s ease;
    border: 5px solid transparent; /* Bordure par d√©faut */
}

.portrait:hover {
    transform: rotate(5deg) scale(1.05);
    box-shadow: 0 0 25px rgba(255,111,97,0.6);
}

/* --- FEEDBACK VISUEL : S√âQUENCE CORRECTE (Style Vinyle) --- */
.portrait.correct {
    border: 5px solid #FFD700; /* Or */
    box-shadow: 0 0 20px #FFD700, inset 0 0 10px #FFD700;
    transform: none; 
    cursor: default;
}

/* --- IMAGES RONDES --- */
.portrait img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

/* --- LISIBILIT√â DES NOMS --- */
.nom {
    margin-top: 0.6rem;
    color: var(--color-cacao-dark); /* Brun fonc√© pour un meilleur contraste */
    background: #fffaf0; /* Fond tr√®s clair pour s'assurer qu'il ressort sur l'arri√®re-plan */
    padding: 2px 8px;
    border-radius: 5px;
    display: inline-block;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.1rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}

/* --- MESSAGE FINAL --- */
#messageFinal {
    opacity: 0;
    transition: opacity 2s ease;
    margin-top: 4vh;
    font-family: 'Cormorant Garamond', serif;
    color: var(--color-text-dark);
    font-size: 1.3rem;
}

/* --- BOUTON FINAL --- */
#boutonSuivant {
    display: none;
    margin: 3vh auto;
    padding: 1rem 2.2rem;
    font-size: 1.1rem;
    font-weight: bold;
    color: #fff;
    background: linear-gradient(90deg, #FF6F61, #FFB6C1);
    border: none;
    border-radius: 25px;
    cursor: pointer;
    box-shadow: 0 0 15px rgba(255,182,193,0.6);
    transition: all 0.4s ease;
    animation: pulse 3s infinite;
}

/* --- EFFET PULSE DOUX --- */
@keyframes pulse {
    0% { box-shadow: 0 0 10px rgba(255,182,193,0.4); transform: scale(1); }
    50% { box-shadow: 0 0 25px rgba(255,182,193,0.8); transform: scale(1.03); }
    100% { box-shadow: 0 0 10px rgba(255,182,193,0.4); transform: scale(1); }
}

#boutonSuivant:hover {
    transform: scale(1.05);
    box-shadow: 0 0 25px rgba(255,182,193,0.9);
}

/* --- ANIMATIONS --- */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- RESPONSIVE --- */
@media (max-width: 768px) {
    .portrait { width: 120px; height: 120px; }
    h1 { font-size: 1.8rem; }
    p.subtitle { font-size: 1rem; }
    p.indication { font-size: 0.9rem; }
}
</style>
</head>

<body>

<img src="images/ondes.svg" alt="ondes radio" class="onde">

<h1>De Nous √† Vous üíõ</h1>
<p class="subtitle">Bienvenue sur Radio Papou & Manou FM üéôÔ∏è</p>

<p class="indication" aria-label="Aide d√©verrouillage">
    Papou & Manou, pour ressentir l'harmonie parfaite de notre petite station, suivez le murmure des ann√©es.<br>
    L'ordre de nos naissances est la cl√© qui ouvrira le chemin du mill√©sime. üé∂üîë
</p>

<div class="container" id="container">
    </div>

<div id="messageFinal">üíõ La fr√©quence est accord√©e. Votre c≈ìur √©met sur la m√™me onde.</div>
<button id="boutonSuivant">Chaque virage m√®ne √† un souvenir‚Ä¶</button>

<script>
// --- DATAS : Ordre des Naissances (cl√©s d'identification) ---
const PORTRAITS_DATA = [
    { id: 'stephanie', nom: 'St√©phanie', image: 'stephanie.jpg', audio: 'stephanie.mp3' },
    { id: 'dimitri', nom: 'Dimitri', image: 'dimitri.jpg', audio: 'dimitri.mp3' },
    { id: 'segolene', nom: 'S√©gol√®ne', image: 'segolene.jpg', audio: 'segolene.mp3' },
    // Oc√©ane est la 4√®me de la s√©quence.
    { id: 'oceane', nom: 'Oc√©ane & Thomas', image: 'oceane-thomas.jpg', audio: 'oceane-thomas.mp3' }, 
    { id: 'solene', nom: 'Sol√®ne', image: 'solene.jpg', audio: 'solene.mp3' },
    // ‚¨ÖÔ∏è NOM CORRIG√â ICI : "Viktor et Anna"
    { id: 'viktor', nom: 'Viktor et Anna', image: 'viktor.jpg', audio: 'viktor.mp3' }, 
    { id: 'leontin', nom: 'L√©ontin', image: 'leontin.jpg', audio: 'leontin.mp3' },
    { id: 'sam', nom: 'Sam', image: 'sam.jpg', audio: 'sam.mp3' },
    { id: 'felix', nom: 'F√©lix', image: 'felix.jpg', audio: 'felix.mp3' }, 
    { id: 'edgar', nom: 'Edgar', image: 'edgar.jpg', audio: 'edgar.mp3' },
    { id: 'zelie', nom: 'Z√©lie', image: 'zelie.jpg', audio: 'zelie.mp3' }
];

// --- √âL√âMENTS DU DOM ---
const fondAudio = new Audio('audios/fond-radio.mp3');
const clicAudio = new Audio('audios/clic.mp3');
const container = document.getElementById('container');
const boutonSuivant = document.getElementById('boutonSuivant');
const messageFinal = document.getElementById('messageFinal');

// --- LOGIQUE DE L'√âNIGME ---
const SEQUENCE_CORRECTE = PORTRAITS_DATA.map(p => p.id); 
let progression = 0; 
let audioEnCours = null; 

// 1. D√©marrage du Fond Sonore (Uniquement au d√©but)
function demarrerFond() {
    fondAudio.volume = 0.3; 
    fondAudio.loop = true;
    fondAudio.play().catch(() => console.log("Lecture auto du fond bloqu√©e (navigateur)."));
}

// 2. G√©n√©ration des Portraits Al√©atoires
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function genererPortraits() {
    const portraitsAleatoires = [...PORTRAITS_DATA];
    shuffle(portraitsAleatoires);

    portraitsAleatoires.forEach(data => {
        const item = document.createElement('div');
        item.className = 'item';
        item.setAttribute('data-id', data.id); 
        
        // Structure HTML (Vinyle + Nom + Audio)
        item.innerHTML = `
            <div class="portrait">
                <img src="images/portraits/${data.image}" alt="${data.nom}">
            </div>
            <div class="nom">${data.nom}</div>
            <audio src="audios/${data.audio}"></audio>
        `;
        
        container.appendChild(item);
    });
}

// 3. Gestion du Clic sur un Portrait
function gererClic(event) {
    const item = event.currentTarget; 
    const idClique = item.getAttribute('data-id');
    const audioElement = item.querySelector('audio');
    const portraitElement = item.querySelector('.portrait');

    // Si le portrait est d√©j√† correct, on ne fait rien
    if (portraitElement.classList.contains('correct')) {
        return;
    }

    // Arr√™ter l'audio en cours s'il y en a un
    if (audioEnCours && !audioEnCours.paused) {
        audioEnCours.pause();
        audioEnCours.currentTime = 0;
    }
    
    // Jouer le nouvel audio
    audioElement.play();
    audioEnCours = audioElement;

    // Baisser le volume du fond sonore pendant la lecture
    if (fondAudio) {
        fondAudio.volume = 0.05; 
        
        // R√©tablir le volume du fond √† la fin de la lecture du portrait
        audioElement.onended = () => {
            fondAudio.volume = 0.3;
        };
    }


    // 4. LOGIQUE DE V√âRIFICATION DE LA S√âQUENCE
    if (idClique === SEQUENCE_CORRECTE[progression]) {
        // ‚úÖ Clic Correct
        portraitElement.classList.add('correct');
        clicAudio.play();
        progression++; 
        
        // 5. V√âRIFICATION DE LA FIN DE L'√âNIGME
        if (progression === SEQUENCE_CORRECTE.length) {
            deverrouillerChemin();
        }

    } else {
        // ‚ùå Clic Incorrect : V√©rifie si c'est une erreur de s√©quence
        if (progression > 0) {
            
            // Si l'utilisateur clique sur la mauvaise personne, on r√©initialise l'affichage 
            // de toutes les vignettes √† partir de l'√©tape en cours (progression).
            const tousLesPortraits = document.querySelectorAll('.portrait');
            tousLesPortraits.forEach(p => {
                const pId = p.closest('.item').getAttribute('data-id');
                const indexDansSequence = SEQUENCE_CORRECTE.indexOf(pId);
                
                // Si l'√©l√©ment est au-del√† du dernier clic correct, on enl√®ve la classe 'correct'
                if (indexDansSequence >= progression) {
                    p.classList.remove('correct');
                }
            });
            
            // Note: La variable 'progression' n'est pas r√©initialis√©e, conservant la m√©moire.
        }
    }
}

// 6. D√©verrouillage Final
function deverrouillerChemin() {
    fondAudio.pause();
    
    messageFinal.style.opacity = 1;
    clicAudio.play();
    
    // Correction du lien final
    boutonSuivant.setAttribute('onclick', "window.location.href='jour1_accueil.html'");
    
    setTimeout(() => {
        boutonSuivant.style.display = 'block';
    }, 2000);
}

// --- INITIALISATION ---
document.addEventListener('DOMContentLoaded', () => {
    genererPortraits();
    demarrerFond();

    // Attacher l'√©couteur √† tous les √©l√©ments '.item' g√©n√©r√©s
    document.querySelectorAll('.item').forEach(item => {
        item.addEventListener('click', gererClic);
    });
});
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¿ Jour 1 â€“ Sur la route des souvenirs</title>

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&family=Lato:wght@400;700&display=swap" rel="stylesheet">

<style>
/* ğŸŒ¿ STYLE GLOBAL */
body {
  font-family: 'Lato', sans-serif;
  
  background-color: #F8F4E3; /* Teinte crÃ¨me de secours */
  /* Une seule image de fond pour le parchemin (le filigrane est dans une div sÃ©parÃ©e) */
  background-image: url('images/papyrus-texture.jpg'); 
  background-size: cover;    
  background-attachment: fixed; 
  
  color: #4F352C;
  margin: 0;
  padding: 0;
  line-height: 1.7;
  overflow-x: hidden;
  scroll-behavior: smooth;
}

/* NOUVELLE RÃˆGLE CSS POUR LE FILIGRANE DE CARTE */
#map-watermark {
  position: fixed; /* Fixe la carte pour qu'elle ne bouge pas */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  
  /* Ajout de la carte en filigrane */
  background-image: url('images/subtle-map.jpg'); /* VOTRE GLOBE */
  background-position: center center;
  background-size: 60vh; /* Taille ajustÃ©e pour le filigrane */
  background-repeat: no-repeat;
  
  /* OpacitÃ© trÃ¨s basse pour l'effet filigrane */
  opacity: 0.1; /* Ajustez entre 0.05 et 0.2 si besoin */
  
  /* S'assurer qu'elle est derriÃ¨re le contenu */
  z-index: -1;
  pointer-events: none; 
}


/* TITRES (AmÃ©lioration du style gravÃ©) */
h1, h2, h3 {
  font-family: 'Cormorant Garamond', serif;
  color: #4B3E35;
  text-align: center;
}
h1 { 
  font-size: 2.4rem; 
  margin-top: 5vh; 
  color: #382922; 
  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.6), 
               -1px -1px 2px rgba(0, 0, 0, 0.1); 
}
h2 { font-size: 1.8rem; color: #7F6050; margin-top: 2rem; }
h3 { font-size: 1.3rem; margin-top: 1rem; }

/* CONTENEUR PRINCIPAL */
main {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

/* BLOCS DÃ‰ROULANTS */
details {
  background: rgba(255, 255, 255, 0.85); 
  border: 2px solid #e0d9c4;
  border-radius: 12px;
  box-shadow: 2px 4px 10px rgba(0,0,0,0.1);
  margin-bottom: 20px;
  padding: 10px 15px;
  overflow: hidden;
  transition: all 0.5s ease;
}
summary {
  font-weight: bold;
  font-family: 'Cormorant Garamond', serif;
  font-size: 1.2rem;
  color: #7F6050;
  cursor: pointer;
  outline: none;
  text-transform: uppercase;
  text-align: center;
}
/* SÃ‰PARATEUR THÃ‰MATIQUE */
summary:before { content: "âœ¶ "; color: #7F6050; margin-right: 10px; font-size: 0.9em; }
summary:after { content: " âœ¶"; color: #7F6050; margin-left: 10px; font-size: 0.9em; }

details[open] { background: #FFFBF5; box-shadow: 0 0 15px rgba(79, 53, 44, 0.3); }

/* BOUTONS DE CHOIX */
.choix-halte { text-align: center; margin: 25px 0; }
.bouton-action { display: inline-block; padding: 12px 25px; margin: 10px; border-radius: 4px; text-decoration: none; font-weight: bold; text-transform: uppercase; transition: all 0.3s ease; box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1); }
.bouton-dejeuner { background-color: #7F6050; color: #FAF5E8; border: 2px solid #7F6050; }
.bouton-dejeuner:hover { background-color: #927568; }
.bouton-continuer { background-color: #E6E1D1; color: #4F352C; border: 2px solid #A08C7F; }
.bouton-continuer:hover { background-color: #F2EEDA; }
.encadre-direction { background-color: #FFF4E8; border: 2px solid #FF6F61; border-radius: 8px; padding: 10px; text-align: center; font-weight: bold; margin: 20px auto; width: fit-content; font-size: 1.1rem; }

/* INPUT & BOUTON ENIGME */
#reponse { padding: 10px; border-radius: 6px; border: 2px solid #d6ccc2; width: 60%; max-width: 300px; margin-right: 10px; }
#valider { background-color: #FF6F61; color: #fff; border: none; border-radius: 6px; padding: 10px 20px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
#valider:hover { background-color: #e25b50; }
.message-feedback { text-align: center; margin-top: 20px; font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; color: #4B3E35; }
#bouton-route { display: none; background-color: #7F6050; color: #FAF5E8; border: 2px solid #7F6050; border-radius: 8px; padding: 12px 25px; font-weight: bold; margin-top: 20px; text-decoration: none; transition: all 0.3s ease; animation: pulseGlow 2.5s infinite; }
#bouton-route:hover { background-color: #927568; }

/* ANIMATIONS */
@keyframes pulseGlow { 0% { box-shadow: 0 0 6px rgba(255, 223, 150, 0.4); } 50% { box-shadow: 0 0 16px rgba(255, 223, 150, 0.8); } 100% { box-shadow: 0 0 6px rgba(255, 223, 150, 0.4); } }
.fade-in { opacity: 0; transform: translateY(10px); animation: fadeSlide 0.8s forwards; }
details[open] .fade-in > * { animation-delay: 0.3s; }
@keyframes fadeSlide { to { opacity: 1; transform: translateY(0); } }

/* FOOTER & SON */
footer { text-align: center; margin: 40px 0 20px; }
.retour-accueil { text-decoration: none; color: #4F352C; font-size: 0.9rem; opacity: 0.8; }
.retour-accueil:hover { text-decoration: underline; }
#son-toggle { position: fixed; bottom: 15px; right: 15px; background: #DCD7C9; border: 2px solid #7F6050; color: #4F352C; border-radius: 50%; width: 40px; height: 40px; text-align: center; line-height: 38px; cursor: pointer; font-size: 1.1rem; transition: all 0.3s ease; }
#son-toggle:hover { background: #EBE6D8; }
</style>
</head>

<body>

<div id="map-watermark"></div> <main>
  <h1>ğŸŒ¿ Jour 1 â€“ Sur la route des souvenirs</h1>
  
  <details open class="fade-in" id="bloc-appel">
    <summary><strong>L'APPEL DU CHEMIN</strong></summary>
    <p class="fade-in" style="text-align:center;">
      Chers Papou & Manou,<br>
      Le moment est venu de laisser derriÃ¨re vous l'horizon connu.<br>
      La premiÃ¨re page du voyage est ouverte.
    </p>

    <div class="encadre-direction fade-in">ğŸ§­ Direction : Saint-Pons-de-ThomiÃ¨res</div>

    <p class="fade-in" style="text-align:center;">
      âœ¨ <strong>HALTE GOURMANDE FACULTATIVE</strong><br>
      Sur la route, un doux dÃ©tour s'offre Ã  vous : si la faim se fait sentir ou si l'envie d'une pause s'impose,
      le village de Saint-Pons-de-ThomiÃ¨res vous invite Ã  un dÃ©jeuner tranquille ou Ã  une pause cafÃ©.<br>
      Laissez votre humeur guider votre arrÃªt.<br><br>
      L'air du Languedoc vous guidera ensuite vers le secret qui y est cachÃ©...
    </p>

    <div class="choix-halte fade-in">
      <p>Alors, quel est votre choix ?</p>
      <a href="#" id="btnPause" class="bouton-action bouton-dejeuner">ğŸ´ Pause Gourmande Ã  Saint-Pons</a>
      <a href="#" id="btnContinuer" class="bouton-action bouton-continuer">ğŸš€ Le MystÃ¨re Nous Attend, Continuons !</a>
    </div>
  </details>

  <details id="dejeuner-st-pons" class="fade-in">
    <summary><strong>PAUSE GOURMANDE Ã€ SAINT-PONS</strong></summary>
    <p style="text-align:center;"><strong>â˜• Le Temps d'un Souffle</strong><br>
    C'est un choix sage et gourmand. L'aventure n'en sera que plus douce le ventre plein !</p>

    <details>
      <summary>ğŸ½ï¸ Option DÃ©jeuner</summary>
      <ul>
        <li><strong>Auberge du Marronnier</strong> â€” <em>Maison ancienne, poutres et cheminÃ©e, cuisine du terroir dÃ¨s 22 â‚¬.</em></li>
        <li><strong>La Table du Boucher</strong> â€” <em>Ambiance conviviale et moderne, plats copieux et gÃ©nÃ©reux.</em></li>
        <li><strong>La Cantine de Tonton</strong> â€” <em>Ã€ Courniou (8 min), rustique-chic, plats faits maison, ambiance joyeuse.</em></li>
      </ul>
    </details>

    <details><summary>â˜• Option CafÃ©</summary>
      <p>Un cafÃ© ou une boulangerie pour une pause rapide avant de reprendre la route des Ã©nigmes.</p>
    </details>

    <details><summary>ğŸ§º Option Pique-nique</summary>
      <p>Si le cÅ“ur vous en dit, cherchez un coin paisible au bord du Jaur, le temps d'un pique-nique improvisÃ©.</p>
    </details>

    <p style="text-align:center;"><strong>ğŸŒ¾ Le Voyage Reprend</strong><br>
    Quand vos cÅ“urs et vos estomacs seront rassasiÃ©s, cliquez ci-dessous pour continuer vers l'Ã©nigme.</p>

    <div style="text-align:center;">
      <a href="#" id="btnContinuerEnigme" class="bouton-action bouton-continuer">â¬‡ï¸ Continuer vers l'Ã‰nigme</a>
    </div>
  </details>

  <details id="enigme-labastide" class="fade-in">
    <summary><strong>ğŸ¡ LA CACHETTE DES TISSEURS</strong></summary>

    <p style="text-align:center; font-style:italic;">
      "Le vent d'Ã©tÃ© a effacÃ© le nom sur la carte."<br> Trouvez la premiÃ¨re destination de notre pÃ©riple en Languedoc.<br>
      </p>

    <h3>ğŸŒ¿ Le Fil Conducteur de l'Ã‰tape</h3>
    <p>
      Redonnez un nom Ã  l'Ã©tape suivante.<br> Les indices historiques sont le seul chemin pour atteindre cette destination cachÃ©e.<br>
    </p>

    <h3>ğŸ” Indice Principal</h3>
    <p>
      Muni des indices : Â« VallÃ©e du ThorÃ© Â» et Â« Haute-Laine Â», quelle est notre destination ?<br><br>
      â€¢ Elle est historiquement surnommÃ©e la <em>capitale du dÃ©lainage</em> et a prospÃ©rÃ© grÃ¢ce Ã  la filature au XIXáµ‰ siÃ¨cle.<br>
      â€¢ Elle est lovÃ©e au cÅ“ur du Parc Naturel RÃ©gional du Haut-Languedoc.<br>
      â€¢ Son nom est composÃ© de deux parties, comme un couple uni.<br><br>
      ğŸª¶ Lâ€™Ã©nigme du jour se dÃ©bloque en inscrivant le nom complet de ce village du Tarn<br>
      <em>(sans tiret ni majuscule, pour simplifier la saisie)</em>.
    </p>

    <div style="text-align:center; margin-top:20px;">
      <input type="text" id="reponse" placeholder="Entrez le nom de la communeâ€¦">
      <button id="valider">ğŸ”“ Valider</button>
      <div id="message" class="message-feedback"></div>

      <a href="ou-le-fil-raconte-l-histoire.html" id="bouton-route">ğŸš— Prenons la route vers ğŸ—ï¸ OÃ¹ le Fil Raconte l'Histoire</a>
    </div>

    <div style="text-align:center; margin-top:25px;">
      <button id="btn-indice-secours" style="
        background-color:#DCD7C9;
        color:#4F352C;
        border:2px solid #7F6050;
        border-radius:8px;
        padding:10px 20px;
        font-weight:bold;
        cursor:pointer;
        transition:all 0.3s ease;
      ">ğŸ’­ J'ai besoin d'un murmure d'indice</button>
    </div>

    <div id="indice-cache" style="display:none; margin-top:20px; border-left:3px solid #7F6050; padding-left:12px;">
      <p><strong>ğŸ” L'Indice de Secours PoÃ©tique</strong></p>
      <p><em>â€œSi le chemin se fait brumeux, Ã©coutez le vent.<br>
      Il murmure deux mots qui se collent ensemble,<br>
      dÃ©signant d'abord la maison forte,<br>
      puis le buisson Ã©pineux.<br>
      C'est l'union de ces deux lieux qui vous donnera la rÃ©ponse.â€</em></p>

      <p>ğŸ—ï¸ <strong>RÃ©vÃ©lation :</strong><br>
      â€¢ Maison forte â†’ <em>Labastide</em><br>
      â€¢ Buisson Ã©pineux â†’ <em>Rouairoux</em></p>
    </div>
  </details>

  <footer>
    <a href="accueil-jour1.html" class="retour-accueil">ğŸ¡ Retour Ã  lâ€™Accueil du Jour 1</a>
  </footer>
</main>

<div id="son-toggle">ğŸ”Š</div>

<script>
/* ğŸµ Mixer deux ambiances : Ã‰tÃ© et Cigales pour un Ã©tÃ© en Languedoc */

// 1. DÃ©finition des sons (CHEMINS CORRIGÃ‰S)
const sonPrincipal = new Audio('audios/ete.mp3'); 
sonPrincipal.loop = true;
sonPrincipal.volume = 0.25; 

const sonMix = new Audio('audios/cigales.mp3'); 
sonMix.loop = true;
sonMix.volume = 0.15; 

let audioInitie = false;
let sonActif = false; // InitialisÃ© Ã  false pour que le premier clic l'active

function startAudioIfNecessary() {
    if (!audioInitie) {
        sonPrincipal.play().catch(e => console.error("Erreur lecture son principal:", e));
        sonMix.play().catch(e => console.error("Erreur lecture son mix:", e));
        audioInitie = true;
        sonActif = true; // Si le lancement rÃ©ussit, le son est actif
        sonToggle.textContent = "ğŸ”Š"; // Met l'icÃ´ne sur "actif" aprÃ¨s le lancement
    }
}

/* ğŸ¯ Gestion du bouton Mute */
const sonToggle = document.getElementById("son-toggle");

sonToggle.addEventListener("click", () => {
    // 1. DÃ©clenche le lancement de l'audio si nÃ©cessaire
    startAudioIfNecessary(); 

    // 2. GÃ©rer la pause/reprise (aprÃ¨s le premier lancement)
    if (audioInitie) { // S'assurer que les sons existent avant de contrÃ´ler
        if (sonActif) { // Si le son est actif, le couper
            sonPrincipal.pause(); 
            sonMix.pause();
            sonToggle.textContent = "ğŸ”‡"; 
        } else { // Si le son est coupÃ©, le reprendre
            sonPrincipal.play(); 
            sonMix.play();
            sonToggle.textContent = "ğŸ”Š"; 
        }
        sonActif = !sonActif; // Inverser l'Ã©tat
    }
});


/* ğŸ¯ Gestion des blocs et Ã©nigme (inchangÃ©e) */
const blocPause = document.getElementById("dejeuner-st-pons");
const blocEnigme = document.getElementById("enigme-labastide");
const btnPause = document.getElementById("btnPause");
const btnContinuer = document.getElementById("btnContinuer");
const btnContinuerEnigme = document.getElementById("btnContinuerEnigme");

function ouvrirBloc(bloc) {
  bloc.open = true;
  bloc.scrollIntoView({ behavior: "smooth" });
  bloc.classList.add("fade-in");
}
function fermerBloc(bloc) { bloc.open = false; }

btnPause.addEventListener("click", e => { e.preventDefault(); ouvrirBloc(blocPause); fermerBloc(blocEnigme); });
btnContinuer.addEventListener("click", e => { e.preventDefault(); ouvrirBloc(blocEnigme); fermerBloc(blocPause); });
btnContinuerEnigme.addEventListener("click", e => { e.preventDefault(); ouvrirBloc(blocEnigme); fermerBloc(blocPause); });

const btnValider = document.getElementById("valider");
const inputRep = document.getElementById("reponse");
const message = document.getElementById("message");
const boutonRoute = document.getElementById("bouton-route");

btnValider.addEventListener("click", () => {
  const reponse = inputRep.value.toLowerCase().replace(/[\s-]/g, '');
  if (["labastiderouairoux", "labastide", "rouairoux"].includes(reponse)) {
    message.innerHTML = "âœ¨ Les fils sont dÃ©liÃ©s !<br>Vous avez trouvÃ© le premier ancrage du voyage.<br>ğŸ¡ Labastide-Rouairoux<br>Mais quelle surprise vous y attend ?";
    boutonRoute.style.display = "inline-block";
    localStorage.setItem("jour1_enigme", "ok");
    localStorage.setItem("jour1_debloque", "ok");
  } else {
    message.textContent = "Hmmâ€¦ le fil sâ€™emmÃªle encore un peu ! Essayez autrement ğŸ’­";
  }
});

document.getElementById('btn-indice-secours').onclick = function() {
  document.getElementById('indice-cache').style.display = 'block';
  this.style.display = 'none';
};
</script>
</body>
</html>